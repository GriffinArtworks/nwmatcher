/*! NWMatcher 1.2.4 Selector Engine - Copyright (c) 2007-2011 Diego Perini & NWBOX All rights reserved */
(function(q){var bq='nwmatcher-1.2.4',j=typeof exports=='object'?exports:(q.NW||(q.NW={}))&&(q.NW.Dom||(q.NW.Dom={})),br=[].slice,g=q.document,t=g.documentElement,P,C,x,D,r,Q,R,S,T,E='[.:#]?',U='([~*^$|!]?={1})',p='[\\x20\\t\\n\\r\\f]*',V='[\\x20]|[>+~][^>+~]',W='[-+]?\\d*n?[-+]?\\d*',F='"[^"]*"'+"|'[^']*'",G='\\[.*\\]|\\(.*\\)|\\{.*\\}',m='(?:[-\\w]|[^\\x00-\\xa0]|\\\\.)',y='(?:-?[_a-zA-Z]{1}[-\\w]*|[^\\x00-\\xa0]+|\\\\.+)+',X='('+F+'|'+y+')',u=p+'('+m+'+:?'+m+'+)'+p+'(?:'+U+p+X+')?'+p,bh=u.replace(X,'([\\x22\\x27]*)((?:\\\\?.)*?)\\3'),H='((?:'+W+'|'+F+'|'+E+'|'+m+'+|\\['+u+'\\]|\\(.+\\)|'+p+'|,)+)',bi='.+',Y=RegExp('(?=[\\x20\\t\\n\\r\\f]*[^>+~(){}<>])(\\*|'+V+'|(?:'+E+y+')|\\['+u+'\\]|\\('+H+'\\)|\\{'+bi+'\\}|,.)+','g'),I=RegExp('^'+p+'|'+p+'$','g'),Z=RegExp('([^,\\\\\\[\\]]+|\\[[^[\\]]*\\]|\\[.*\\]|\\([^()]+\\)|\\(.*\\)|\\{[^{}]+\\}|\\{.*\\}|\\\\.)+','g'),bj=RegExp('(\\['+u+'\\]|\\('+H+'\\)|[^\x20>+~]|\\\\.)+','g'),bk=/[\x20\t\n\r\f]+/g,bl=RegExp(y+'|^$'),s={},v={'=':"n=='%m'",'^=':"n.indexOf('%m')==0",'*=':"n.indexOf('%m')>-1",'|=':"(n+'-').indexOf('%m-')==0",'~=':"(' '+n+' ').indexOf(' %m ')>-1",'$=':"n.substr(n.length-'%m'.length)=='%m'"},z={ID:RegExp('^\\*?#('+m+'+)|'+G),TAG:RegExp('^('+m+'+)|'+G),CLASS:RegExp('^\\*?\\.('+m+'+$)|'+G)},n={universal:/^\*(.*)/,id:RegExp('^#('+m+'+)(.*)'),tagName:RegExp('^('+m+'+)(.*)'),className:RegExp('^\\.('+m+'+)(.*)'),attribute:RegExp('^\\['+bh+'\\](.*)'),children:/^[\x20\t\n\r\f]*\>[\x20\t\n\r\f]*(.*)/,adjacent:/^[\x20\t\n\r\f]*\+[\x20\t\n\r\f]*(.*)/,relative:/^[\x20\t\n\r\f]*\~[\x20\t\n\r\f]*(.*)/,ancestor:/^[\x20\t\n\r\f]+(.*)/},J,o,ba,bb=true,bm='getElementsByTagName'in g,bn='getElementsByClassName'in g,bo={value:1,checked:1,selected:1},bc=typeof g.addEventListener!='function',bd='f&&f(c[k]);r[r.length]=c[k];continue main;',be=bc?'if(e.nodeName<"A")continue;':'',A=function(a,b){var d=g;D=a;g=a.ownerDocument||a;if(b||d!=g){t=g.documentElement;o=g.createElement('DiV').nodeName=='DiV';ba=o?'.toUpperCase()':'';J=o||typeof g.compatMode=='string'&&g.compatMode.indexOf('CSS')<0}},K=function(a,b){var d=0,f=null;while((f=b[d])){if(f.getAttribute('id')==a){break}++d}return f},B=!('fileSize'in g)?function(a,b){a=a.replace(/\\/g,'');return b.getElementById&&b.getElementById(a)||K(a,b.getElementsByTagName('*'))}:function(a,b){var d=null;a=a.replace(/\\/g,'');if(o||b.nodeType!=9){return K(a,b.getElementsByTagName('*'))}if((d=b.getElementById(a))&&d.name==a&&b.getElementsByName){return K(a,b.getElementsByName(a))}return d},bp=function(a,b){A(b||(b=g));return B(a,b)},L=function(a,b,d){if(typeof a=='string'){b+=(d?'e=c[k];':'e=k;')+bf(a,d?bd:'f&&f(k);return true;')}else{var f=-1,c={},h;while((h=a[++f])){h=h.replace(I,'');if(!c[h]&&(c[h]=true)){b+=(f>0?(d?'e=c[k];':'e=k;'):'')+bf(h,d?bd:'f&&f(k);return true;')}}}if(d)return Function('c,s,r,d,h,g,f','var N,n,x=0,k=-1,e;main:while((e=c[++k])){'+b+'}return r;');else return Function('e,s,r,d,h,g,f','var N,n,x=0,k=e;'+b+'return false;')},bf=function(a,b){var d=0,f,c,h,k,i,e;while(a){d++;if((c=a.match(n.universal))){void 0}else if((c=a.match(n.id))){b='if('+(o?'e.getAttribute("id")':'(e.submit?e.getAttribute("id"):e.id)')+'=="'+c[1]+'"){'+b+'}'}else if((c=a.match(n.tagName))){b='if(e.nodeName'+(o?'=="'+c[1]+'"':ba+'=="'+c[1].toUpperCase()+'"')+'){'+b+'}'}else if((c=a.match(n.className))){b='if((n='+(o?'e.getAttribute("class")':'e.className')+')&&n.length&&(" "+'+(J?'n.toLowerCase()':'n')+'.replace('+bk+'," ")+" ").indexOf(" '+(J?c[1].toLowerCase():c[1])+' ")>-1){'+b+'}'}else if((c=a.match(n.attribute))){if(c[2]&&!v[c[2]]){l('Unsupported operator in attribute selectors "'+a+'"');return''}if(c[2]&&c[4]&&(e=v[c[2]])){c[4]=c[4].replace(/\\([0-9a-f]{2,2})/,'\\x$1');f='n=(e.getAttribute("'+c[1]+'")+"").toLowerCase();';e=e.replace(/\%m/g,c[4].toLowerCase())}else if(c[2]=='!='||c[2]=='='){f='n=e.getAttribute("'+c[1]+'");';e='n'+c[2]+'="'+c[4]+'"'}else if(!c[2]){if(bo[c[1].toLowerCase()]){i='default'+c[1].charAt(0).toUpperCase()+c[1].slice(1).toLowerCase();f='n=e["'+i+'"];';e='n'}else{f='n=e.getAttributeNode("'+c[1]+'");';e='n&&n.specified'}}else{f='';e='false'}b=f+'if('+e+'){'+b+'}'}else if((c=a.match(n.adjacent))){b='var N'+d+'=e;while(e&&(e=e.previousSibling)){if(e.nodeName>"@"){'+b+'break;}}e=N'+d+';'}else if((c=a.match(n.relative))){b='var N'+d+'=e;e=e.parentNode.firstChild;while(e&&e!=N'+d+'){if(e.nodeName>"@"){'+b+'}e=e.nextSibling;}e=N'+d+';'}else if((c=a.match(n.children))){b='var N'+d+'=e;if(e&&e!==h&&e!==g&&(e=e.parentNode)){'+b+'}e=N'+d+';'}else if((c=a.match(n.ancestor))){b='var N'+d+'=e;while(e&&e!==h&&e!==g&&(e=e.parentNode)){'+b+'}e=N'+d+';'}else{f=false;k=true;for(f in s){if((c=a.match(s[f].Expression))&&c[1]){h=s[f].Callback(c,b);b=h.source;k=h.status;if(k)break}}if(!k){l('Unknown pseudo-class selector "'+a+'"');return''}if(!f){l('Unknown token in selector "'+a+'"');return''}}if(!c){l('Invalid syntax in selector "'+a+'"');return''}a=c&&c[c.length-1]}return b},l=function(a){if(typeof q.DOMException!=='undefined'){var b=Error();b.message='SYNTAX_ERR: (Selectors) '+a;b.code=12;throw b;}else{throw Error(12,'SYNTAX_ERR: (Selectors) '+a);}},M=function(a,b,d,f){var c;if(!(a&&a.nodeName>'@')){l('Invalid element argument');return false}else if(!b||typeof b!='string'){l('Invalid selector argument');return false}else if(D!=d){A(d||(d=a.ownerDocument))}b=b.replace(I,'');bb&&(b=NW.Dom.shortcuts(b,a,d));if(Q!=b){if((c=b.match(Y))&&c[0]==b){P=(c=b.match(Z)).length<2;Q=b;S=c}else{l('The string "'+b+'", is not a valid CSS selector');return false}}else c=S;if(N[b]){return N[b](a,w,[],g,t,d,f)}return(N[b]=L(P?b:c,'',false))(a,w,[],g,t,d,f)},bg=function(a,b,d){var f,c,h,k,i,e;if(arguments.length===0){l('Missing required selector parameters');return[]}else if(a===''){l('Empty selector string');return[]}else if(typeof a!='string'){return[]}else if(D!=b){A(b||(b=g))}a=a.replace(I,'');bb&&(a=NW.Dom.shortcuts(a,b));if((c=R!=a)){if((i=a.match(Y))&&i[0]==a){C=(i=a.match(Z)).length<2;R=a;T=i}else{l('The string "'+a+'", is not a valid CSS selector');return[]}}else i=T;if(b.nodeType==11){k=b.childNodes}else if(C){if(c){i=a.match(bj);e=i[i.length-1];x=e.split(':not')[0];r=a.length-e.length}if((i=x.match(z.ID))&&(e=i[1])){if((h=B(e,b))){if(M(h,a)){d&&d(h);return[h]}}return[]}else if((i=a.match(z.ID))&&(e=i[1])){if((h=B(e,g))){if('#'+e==a){d&&d(h);return[h]}if(/[>+~]/.test(a)){b=h.parentNode}else{a=a.replace('#'+e,'*');r-=e.length+1;b=h}}else return[]}if(!o&&bm&&(i=x.match(z.TAG))&&(e=i[1])){if((k=b.getElementsByTagName(e)).length===0)return[];a=a.slice(0,r)+a.slice(r).replace(e,'*')}else if(!o&&bn&&(i=x.match(z.CLASS))&&(e=i[1])){if((k=b.getElementsByClassName(e.replace(/\\/g,''))).length===0)return[];a=a.slice(0,r)+a.slice(r).replace('.'+e,bl.test(a.charAt(a.indexOf(e)-1))?'':'*')}}if(!k){if(bc){k=/^(?:applet|object)$/i.test(b.nodeName)?b.childNodes:b.getElementsByTagName('*');be='if(e.nodeName<"A")continue;'}else{k=b.getElementsByTagName('*')}}if(O[a]){return O[a](k,w,[],g,t,b,d)}return(O[a]=L(C?a:i,be,true))(k,w,[],g,t,b,d)},O={},N={},w={byId:B,match:M,select:bg};Tokens={prefixes:E,encoding:m,operators:U,whitespace:p,identifier:y,attributes:u,combinators:V,pseudoclass:H,pseudoparms:W,quotedvalue:F};j.emit=l;j.byId=bp;j.match=M;j.select=bg;j.compile=L;j.Snapshot=w;j.Operators=v;j.Selectors=s;j.Tokens=Tokens;j.caching=function(a){return a};j.shortcuts=function(a){return a};j.registerOperator=function(a,b){v[a]||(v[a]=b)};j.registerSelector=function(a,b,d){s[a]||(s[a]={Expression:b,Callback:d})};A(g,true)})(this);
(function(){var h={'a':1,'A':1,'area':1,'AREA':1,'link':1,'LINK':1},f=document.documentElement,g='compareDocumentPosition'in f?function(b,a){return(b.compareDocumentPosition(a)&16)==16}:'contains'in f?function(b,a){return a.nodeType==1&&b.contains(a)}:function(b,a){while((a=a.parentNode)&&a.nodeType==1){if(a===b)return true}return false},i=function(b){return b.getAttribute('href')&&h[b.nodeName]},j=function(b){b=b.firstChild;while(b){if(b.nodeType==3||b.nodeName>'@')return false;b=b.nextSibling}return true},k=function(b,a){var c=1,e=a?'nextSibling':'previousSibling';while((b=b[e])){if(b.nodeName>'@')++c}return c},l=function(b,a){var c=1,e=a?'nextSibling':'previousSibling',d=b.nodeName;while((b=b[e])){if(b.nodeName==d)++c}return c};NW.Dom.Snapshot['contains']=g;NW.Dom.Snapshot['isLink']=i;NW.Dom.Snapshot['isEmpty']=j;NW.Dom.Snapshot['nthOfType']=l;NW.Dom.Snapshot['nthElement']=k})();NW.Dom.registerSelector('nwmatcher:spseudos',/^\:((root|empty|nth-)?(?:(first|last|only)-)?(child)?-?(of-type)?)(?:\(([^\x29]*)\))?(.*)/,function(b,a){var c,e,d,h=true,f,g;switch(b[2]){case'root':if(b[7])a='if(e===h||s.contains(h,e)){'+a+'}';else a='if(e===h){'+a+'}';break;case'empty':a='if(s.isEmpty(e)){'+a+'}';break;default:if(b[2]&&b[6]){if(b[6]=='n'){a='if(e!==h){'+a+'}';break}else if(b[6]=='even'){c=2,d=0}else if(b[6]=='odd'){c=2,d=1}else{d=((e=b[6].match(/(-?\d+)$/))?parseInt(e[1],10):0);c=((e=b[6].match(/(-?\d*)n/))?parseInt(e[1],10):0);if(e&&e[1]=='-')c=-1}f=d<1&&c>1?'(n-('+d+'))%'+c+'==0':c>+1?(b[3]=='last')?'(n-('+d+'))%'+c+'==0':'n>='+d+'&&(n-('+d+'))%'+c+'==0':c<-1?(b[3]=='last')?'(n-('+d+'))%'+c+'==0':'n<='+d+'&&(n-('+d+'))%'+c+'==0':c===0?'n=='+d:(b[3]=='last')?c==-1?'n>='+d:'n<='+d:c==-1?'n<='+d:'n>='+d;a='if(e!==h){n=s['+(b[5]?'"nthOfType"':'"nthElement"')+'](e,'+(b[3]=='last'?'true':'false')+');if('+f+'){'+a+'}}'}else if(b[3]){c=b[3]=='first'?'previous':'next';e=b[3]=='only'?'previous':'next';d=b[3]=='first'||b[3]=='last';g=b[5]?'&&n.nodeName!=e.nodeName':'&&n.nodeName<"@"';a='if(e!==h){'+('n=e;while((n=n.'+c+'Sibling)'+g+');if(!n){'+(d?a:'n=e;while((n=n.'+e+'Sibling)'+g+');if(!n){'+a+'}')+'}')+'}'}else{h=false}break}return{'source':a,'status':h}});NW.Dom.registerSelector('nwmatcher:dpseudos',/^\:(link|visited|target|lang|not|active|focus|hover|checked|disabled|enabled|selected)(?:\((["']*)(.*?(\(.*\))?[^'"()]*?)\2\))?(.*)/,(function(){var e=document,d,h=true,f,g,i,j=true,k=true;with(NW.Dom.Tokens){g=new RegExp('^'+whitespace+'|'+whitespace+'$','g'),i=new RegExp('^((?!:not)('+prefixes+'|'+identifier+'|\\([^()]*\\))+|\\['+attributes+'\\])$')}return function(b,a){var c=true;switch(b[1]){case'not':d=b[3].replace(g,'');if(k&&!i.test(d)){NW.Dom.emit('Negation pseudo-class only accepts simple selectors "'+b.join('')+'"')}else{if('compatMode'in e){a='if(!'+NW.Dom.compile(d,'',false)+'(e,s,r,d,h,g)){'+a+'}'}else{a='if(!s.match(e, "'+d.replace(/\x22/g,'\\"')+'",r)){'+a+'}'}}break;case'checked':f='typeof e.form!=="undefined"&&(/^(?:radio|checkbox)$/i).test(e.type)';a='if'+(j?'((('+f+')||/^option$/i.test(e.nodeName))&&(e.checked||e.selected))':'('+f+'&&e.checked)')+'{'+a+'}';break;case'disabled':a='if(((typeof e.form!=="undefined"&&!(/hidden/i).test(e.type))||s.isLink(e))&&e.disabled){'+a+'}';break;case'enabled':a='if(((typeof e.form!=="undefined"&&!(/hidden/i).test(e.type))||s.isLink(e))&&!e.disabled){'+a+'}';break;case'lang':f='';if(b[3])f=b[3].substr(0,2)+'-';a='do{(n=e.lang||"").toLowerCase();if((n==""&&h.lang=="'+b[3].toLowerCase()+'")||(n&&(n=="'+b[3].toLowerCase()+'"||n.substr(0,3)=="'+f.toLowerCase()+'"))){'+a+'break;}}while((e=e.parentNode)&&e!==g);';break;case'target':n=e.location?e.location.hash:'';if(n){a='if(e.id=="'+n.slice(1)+'"){'+a+'}'}break;case'link':a='if(s.isLink(e)&&!e.visited){'+a+'}';break;case'visited':a='if(s.isLink(e)&&e.visited){'+a+'}';break;case'active':a='if(e===d.activeElement){'+a+'}';break;case'hover':a='if(e===d.hoverElement){'+a+'}';break;case'focus':a='hasFocus'in e?'if(e===d.activeElement&&d.hasFocus()&&(e.type||e.href)){'+a+'}':'if(e===d.activeElement&&(e.type||e.href)){'+a+'}';break;case'selected':a='if(e.nodeName.toLowerCase()=="option"&&e.selected){'+a+'}';break;default:c=false;break}return{'source':a,'status':c}}})());
